<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Proyecto VR con Meta Quest 2</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
   
    <a-scene>
        <!-- Objeto interactivo con clase "clickable" -->
        <a-box id="objeto" class="clickable" position="0 1 -3" width="0.5" height="0.5" depth="0.5" color="#4CC3D9"></a-box>
      
        <!-- Controlador de la mano derecha con raycaster para detectar objetos "clickable" -->
        <a-entity id="mano-derecha" hand-controls="hand: right"
                  raycaster="objects: .clickable"
                  grabber></a-entity>
      
        <a-sky color="black"></a-sky>
      </a-scene>
      
      <script>
        // Componente para "agarrar" un objeto
        AFRAME.registerComponent('grabber', {
          init: function () {
            const handEl = this.el;
            let heldObject = null;
      
            // Detectar cuando el trigger es presionado sobre un objeto "clickable"
            handEl.addEventListener('triggerdown', () => {
              const intersectedEls = handEl.components.raycaster.intersectedEls;
              if (intersectedEls.length > 0) {
                heldObject = intersectedEls[0]; // Toma el primer objeto intersectado
                heldObject.setAttribute('position', handEl.getAttribute('position'));
                handEl.appendChild(heldObject); // Adjunta el objeto al controlador
              }
            });
      
            // Suelta el objeto al liberar el trigger
            handEl.addEventListener('triggerup', () => {
              if (heldObject) {
                handEl.sceneEl.appendChild(heldObject); // Suelta el objeto de la mano
                heldObject = null;
              }
            });
          }
        });
      </script>
      
  </body>
</html>
