<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Mini Ciudad en A-Frame</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3">
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script>
    AFRAME.registerComponent('move-on-click', {
      init: function () {
        // Este código se ejecuta cuando haces clic sobre el objeto
        this.el.addEventListener('click', (evt) => {
          console.log("Clic detectado en el objeto!");

          // Obtener la posición de la cámara (o cursor)
          const camera = document.querySelector('a-camera');
          const cameraPosition = camera.getAttribute('position');

          // Mover el objeto a la posición de la cámara
          this.el.setAttribute('position', {
            x: cameraPosition.x,
            y: cameraPosition.y,
            z: cameraPosition.z - 3  // Puedes ajustar la distancia
          });
        });
      }
    });
  </script>
</head>

<body>
  <a-scene>
    <!-- Cámara con raycaster configurado correctamente para detectar objetos con clase 'draggable' -->
    <a-camera wasd-controls="acceleration: 50; fly: true" position="0 2 0" raycaster="objects: .draggable" look-controls="pointerLockEnabled: true">
      <!-- El cursor debería estar aquí -->
      <a-cursor color="#FF0000" raycaster="objects: .draggable" fuse="false"></a-cursor>
    </a-camera>

    <!-- Suelo de la ciudad -->
    <a-plane position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#7BC8A4"></a-plane>

    <!-- Edificios de la ciudad -->
    <a-box position="0 2 -10" depth="10" height="4" width="4" color="#4CC3D9"></a-box>
    <a-box position="5 4 -15" depth="5" height="8" width="5" color="#EF2D5E"></a-box>
    <a-box position="-5 6 -20" depth="6" height="12" width="6" color="#FFC65D"></a-box>
    <a-box position="10 3 -25" depth="4" height="6" width="4" color="#24CAFF"></a-box>

    <!-- Objeto que se puede mover -->
    <a-box id="movableObject" position="0 1 -5" color="blue" move-on-click="true" class="draggable"></a-box>

    <!-- Cielo -->
    <a-sky color="#87CEEB"></a-sky>
  </a-scene>
</body>
</html>
